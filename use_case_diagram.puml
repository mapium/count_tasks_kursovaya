@startuml Система учёта производственных задач

!define RECTANGLE class

left to right direction

actor "Администратор" as Admin
actor "Руководитель отдела" as Manager
actor "Сотрудник" as Employee

rectangle "Система учёта производственных задач" {
  ' Аутентификация и авторизация
  usecase "Регистрация пользователя" as RegisterUser
  usecase "Вход в систему" as Login
  usecase "Обновление токена" as RefreshToken
  
  ' Управление пользователями (Администратор)
  usecase "Регистрация пользователя администратором" as RegisterUserByAdmin
  usecase "Просмотр списка пользователей" as ViewUsersList
  
  ' Управление сотрудниками
  usecase "Просмотр списка сотрудников" as ViewEmployeesList
  usecase "Просмотр данных сотрудника" as ViewEmployeeDetails
  usecase "Создание сотрудника" as CreateEmployee
  usecase "Обновление данных сотрудника" as UpdateEmployee
  usecase "Удаление сотрудника" as DeleteEmployee
  
  ' Управление подразделениями
  usecase "Просмотр списка подразделений" as ViewDepartmentsList
  usecase "Просмотр данных подразделения" as ViewDepartmentDetails
  usecase "Создание подразделения" as CreateDepartment
  usecase "Обновление подразделения" as UpdateDepartment
  usecase "Удаление подразделения" as DeleteDepartment
  
  ' Управление задачами
  usecase "Просмотр всех задач (по подразделениям)" as ViewAllTasksGrouped
  usecase "Просмотр задач подразделения" as ViewDepartmentTasks
  usecase "Просмотр своих задач" as ViewMyTasks
  usecase "Создание задачи" as CreateTask
  usecase "Обновление задачи" as UpdateTask
  usecase "Удаление задачи" as DeleteTask
  usecase "Изменение статуса задачи" as UpdateTaskStatus
  usecase "Добавление комментария к задаче" as AddTaskComment
}

' Связи Администратора
Admin --> RegisterUser
Admin --> Login
Admin --> RefreshToken
Admin --> RegisterUserByAdmin
Admin --> ViewUsersList
Admin --> ViewEmployeesList
Admin --> ViewEmployeeDetails
Admin --> CreateEmployee
Admin --> UpdateEmployee
Admin --> DeleteEmployee
Admin --> ViewDepartmentsList
Admin --> ViewDepartmentDetails
Admin --> CreateDepartment
Admin --> UpdateDepartment
Admin --> DeleteDepartment
Admin --> ViewAllTasksGrouped
Admin --> ViewDepartmentTasks
Admin --> ViewMyTasks
Admin --> CreateTask
Admin --> UpdateTask
Admin --> DeleteTask
Admin --> UpdateTaskStatus
Admin --> AddTaskComment

' Связи Руководителя отдела
Manager --> Login
Manager --> RefreshToken
Manager --> ViewDepartmentsList
Manager --> ViewDepartmentDetails
Manager --> ViewAllTasksGrouped
Manager --> ViewDepartmentTasks
Manager --> ViewMyTasks
Manager --> CreateTask
Manager --> UpdateTask
Manager --> DeleteTask
Manager --> UpdateTaskStatus
Manager --> AddTaskComment

' Связи Сотрудника
Employee --> Login
Employee --> RefreshToken
Employee --> ViewDepartmentsList
Employee --> ViewDepartmentDetails
Employee --> ViewDepartmentTasks
Employee --> ViewMyTasks
Employee --> UpdateTaskStatus
Employee --> AddTaskComment
Employee --> UpdateEmployee : <<только свои данные>>

' Расширения и включения
Login ..> RegisterUser : <<extends>>
UpdateTaskStatus ..> ViewMyTasks : <<extends>>
AddTaskComment ..> ViewMyTasks : <<extends>>

note right of RegisterUser
  Доступно всем
  без авторизации
end note

note right of RegisterUserByAdmin
  Только для
  администратора
end note

note right of UpdateEmployee
  Сотрудник может
  обновлять только
  свои данные
end note

note right of ViewAllTasksGrouped
  Доступно только
  руководителям
  и администраторам
end note

@enduml

